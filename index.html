<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="icon/Icon.png">
    <title>Horóscopo Chino</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/bootstrap.js"></script>
    <link rel="manifest" href="manifest.webmanifest">
    <script src="app.js"></script>
  </head>

  <body>
    <div>
      <nav class="navbar navbar-expand-lg" style="background-color: #f7d3d2;">
        <div class="container-fluid justify-content-center">
            <div class="navbar-nav">
              <a class="nav-link active" aria-current="page" href="">Inicio</a>
              <a class="nav-link" href="horoscopo.html">Tu horóscopo</a>
              <a class="nav-link" href="añoTigre.html">Año de tigre 2022</a>
            </div>
          </div>
        </div>
      </nav>
      <div class="container p-4">
        <h3 class="text-center">¿Qué es el horóscopo chino?</h3>
        <br>
        <p class="lead">
            En China, la astrología es una de las artes más antiguas de adivinación. Según esta tradición, los signos se basan en el año de nacimiento, están identificados con animales y cada uno de ellos se repite cada doce años. <br>
            Tal como sucede en la astrología occidental, para esta disciplina las coordenadas del momento en que se llega al mundo son la clave para establecer diferentes características de personalidad. Y si bien para conocer el signo o animal basta con el año de nacimiento, para una carta natal completa es necesario agregarle la hora y el lugar de nacimiento de la persona.<br>
            Los signos del horóscopo chino son: Rata, Búfalo, Tigre, Conejo, Dragón, Serpiente, Caballo, Cabra, Mono, Gallo, Perro y Cerdo. 
          </p>
          <div align="center"><img src="icon/horoscopo.png" width="300" height="300"></div>
        </div>

        <br>

        <div class="row text-center">
          <div class="col">
            <a id="instalar" class="btn" style="background-color: #F2A999;" href="" >Instalar Aplicación</a>
            <a id="instalarNotificaciones" class="btn" style="background-color: #F2A999;" href="">Recibir Notificaciones</a>
          </div>
        </div>

    </div> <br>
      <div class="col-md-12 text-center p-2" style="background-color: antiquewhite;">
          <p><img src="icon/Icon.png" width="25">Copyright © 2022 | Todos los derechos reservados.<img src="icon/Icon.png" width="25"></p>
      </div>

      <script>
        // Instalar
        let eventoPrompt;
        let eventLocalStorage;

        window.addEventListener('beforeinstallprompt', function(e){
          e.preventDefault();
          eventoPrompt= e;
        });

        if(localStorage.getItem('install') !== undefined && localStorage.getItem('install') === 'accepted'){
        btnInstalar= document.getElementById("instalar");
          btnInstalar.style.display = 'none';
        } 
        else{
          btnInstalar= document.getElementById("instalar");
          btnInstalar.addEventListener('click', (e)=>{
          eventoPrompt.prompt();
          eventoPrompt.userChoice.then((choiceResult)=>{
            eventLocalStorage = choiceResult.outcome;
            localStorage.setItem("install", eventLocalStorage);
          });
        });
      }
        
        // Notificaciones
        let botonNotificaciones = document.getElementById("instalarNotificaciones");
        botonNotificaciones.addEventListener('click',function(e){
          Notification.requestPermission().then(function(result){
            if(result ==='granted'){
              randomNotificacion();
            }
          });
        });
        function randomNotificacion(){
          let nTitle="Descubre tu Horóscopo Chino";
          let nbody= "Te invitamos a conocer nuestro contenido";
          let nImage="./icon/logo.png";
          let options={
            body: nbody,
            icon: nImage
          }
          let notif = new Notification(nTitle,options);
          setTimeout(randomNotificacion,10000);
        }
      </script>
      <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
      <script>
        window.OneSignal = window.OneSignal || [];
        OneSignal.push(function() {
          OneSignal.init({
            appId: "b6ec06eb-aa4f-44c1-8806-8e6473716357",
          });
        });
      </script>
  </body>
</html>